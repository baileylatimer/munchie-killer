<div class="custom-faq tw-py-16 tw-px-4 md:tw-px-8 br" style="background-color: var(--color-contrast-lower);">
  <div class="tw-max-w-4xl tw-mx-auto">
    
    <!-- Section Title -->
    {% if section.settings.heading != blank %}
      <h2 class="tw-text-3xl md:tw-text-4xl lg:tw-text-5xl tw-font-bold tw-mb-12" style="color: var(--color-contrast-higher);">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <!-- FAQ Items -->
    {% if section.blocks.size > 0 %}
      <div class="custom-faq-container">
        {% for block in section.blocks %}
          {% if block.type == 'faq_item' %}
            <div 
              class="custom-faq-item tw-border-b tw-border-gray-600 tw-pb-6 tw-mb-6 tw-last:border-b-0 tw-last:mb-0"
              {{ block.shopify_attributes }}
            >
              
              <!-- Question (Clickable Header) -->
              <button 
                class="custom-faq-question tw-w-full tw-flex tw-justify-between tw-items-center tw-text-left tw-cursor-pointer tw-group"
                onclick="toggleFaqItem(this)"
                aria-expanded="false"
              >
                <!-- Question Text -->
                {% if block.settings.question != blank %}
                  <h4 class="tw-text-xl md:tw-text-2xl tw-font-medium tw-pr-4" style="color: var(--color-contrast-higher);">
                    {{ block.settings.question }}
                  </h4>
                {% endif %}

                <!-- Plus/Minus Icon -->
                <div class="custom-faq-icon tw-flex-shrink-0 tw-w-6 tw-h-6 tw-flex tw-items-center tw-justify-center">
                  <svg class="tw-w-6 tw-h-6 tw-transition-transform tw-duration-300" fill="currentColor" style="color: var(--color-contrast-higher);" viewBox="0 0 20 20">
                    <path class="custom-faq-icon-horizontal" fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"/>
                  </svg>
                </div>
              </button>

              <!-- Answer (Expandable Content) -->
              {% if block.settings.answer != blank %}
                <div class="custom-faq-answer tw-overflow-hidden tw-transition-all tw-duration-300 tw-max-h-0">
                  <div class="tw-pt-4">
                    <p class="tw-text-base md:tw-text-lg tw-leading-relaxed" style="color: var(--color-contrast-higher); opacity: 0.8;">
                      {{ block.settings.answer }}
                    </p>
                  </div>
                </div>
              {% endif %}

            </div>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}

  </div>
</div>

<script>
function toggleFaqItem(button) {
  const faqItem = button.closest('.custom-faq-item');
  const answer = faqItem.querySelector('.custom-faq-answer');
  const icon = button.querySelector('.custom-faq-icon svg');
  const isExpanded = button.getAttribute('aria-expanded') === 'true';

  if (isExpanded) {
    // Collapse
    answer.style.maxHeight = '0px';
    button.setAttribute('aria-expanded', 'false');
    icon.style.transform = 'rotate(0deg)';
  } else {
    // Expand
    answer.style.maxHeight = answer.scrollHeight + 'px';
    button.setAttribute('aria-expanded', 'true');
    icon.style.transform = 'rotate(45deg)';
  }
}
</script>

{% schema %}
{
  "name": "Custom FAQ",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "FAQ"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Item",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "Frequently asked question?"
        },
        {
          "type": "textarea",
          "id": "answer",
          "label": "Answer",
          "default": "Your answer goes here."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom FAQ",
      "blocks": [
        {
          "type": "faq_item",
          "settings": {
            "question": "Will I lose weight with Munchie Killer?",
            "answer": "Munchie Killer contains berberine, which helps regulate blood sugar levels and reduce cravings. By stabilizing glucose metabolism and improving insulin sensitivity, it naturally reduces appetite and helps prevent overeating. Many users experience weight management benefits as part of a healthy lifestyle, though individual results may vary."
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Does it have caffeine or stimulants?",
            "answer": "No, Munchie Killer is completely stimulant-free. It works through natural metabolic pathways rather than artificial stimulation. Berberine activates AMPK (your body's metabolic switch) naturally, providing sustained energy balance without jitters, crashes, or sleep disruption."
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "Can I take it with other supplements?",
            "answer": "Munchie Killer is generally safe to take with most supplements. However, if you're taking medications for diabetes, blood pressure, or other metabolic conditions, consult your healthcare provider first. Berberine can enhance the effects of blood sugar medications, so medical supervision may be recommended."
          }
        },
        {
          "type": "faq_item",
          "settings": {
            "question": "When should I take it?",
            "answer": "For best results, take one gummy 15-30 minutes before your largest meal of the day. This timing allows berberine to help regulate the blood sugar response from your meal. Consistency is key - taking it at the same time daily helps maintain stable blood sugar levels and appetite control."
          }
        }
      ]
    }
  ]
}
{% endschema %}
