<div class="full-width-feature tw-w-full">
  <!-- Header Content Area -->
  <div class=" tw-pt-16 tw-px-4 md:tw-px-8">
    <div class="tw-max-w-4xl tw-mx-auto tw-text-center">
      
      <!-- H2 Title -->
      {% if section.settings.heading != blank %}
        <h2 class="color-contrast-higher tw-text-3xl md:tw-text-4xl lg:tw-text-5xl tw-font-bold tw-mb-8">
          {{ section.settings.heading }}
        </h2>
      {% endif %}

      <!-- Paragraph Text -->
      {% if section.settings.description != blank %}
        <p class="color-contrast-higher tw-text-base md:tw-text-lg tw-leading-relaxed tw-mb-6 tw-max-w-3xl tw-mx-auto">
          {{ section.settings.description }}
        </p>
      {% endif %}

      <!-- Three Pills -->
      {% if section.blocks.size > 0 %}
        <div class="tw-flex tw-flex-wrap tw-justify-center tw-gap-2 md:tw-gap-3 tw-mb-6">
          {% for block in section.blocks %}
            {% if block.type == 'pill' %}
              <div 
                class="tw-px-6 tw-py-3 tw-rounded-full border-contrast-higher color-contrast-higher tw-text-sm md:tw-text-base tw-whitespace-nowrap"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.pill_text }}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

    </div>
  </div>

  <!-- Full Width Image Section -->
  {% if section.settings.image != blank %}
    <div class="tw-relative tw-w-full tw-h-[400px] md:tw-h-[580px] tw-overflow-hidden">
      
      <!-- Background Image -->
      {{ section.settings.image | image_url: width: 1920 | image_tag: 
         class: 'tw-w-full tw-h-full tw-object-cover br', 
         loading: 'lazy',
         alt: section.settings.heading }}

      <!-- Top Gradient Overlay -->
      <div 
        class="tw-absolute tw-top-0 tw-left-0 tw-w-full tw-h-32 tw-pointer-events-none"
        style="background: linear-gradient(180deg, #1B1B1B 0%, rgba(27, 27, 27, 0.00) 100%);">
      </div>

      <!-- Timeline Overlay -->
      {% if section.settings.show_timeline %}
        <div class="tw-absolute tw-bottom-8 tw-left-8 md:tw-bottom-12 md:tw-left-12">
          <div class="tw-p-6 tw-rounded-lg tw-backdrop-blur-sm" style="background-color:rgba(0, 0, 0, 0.62);">
            <div class="tw-flex tw-items-center tw-gap-4">
              
              <!-- Gummy Image with Progress Ring -->
              <div class="tw-relative tw-w-16 tw-h-16 tw-flex-shrink-0">
                
                <!-- Progress Ring SVG -->
                <svg class="tw-absolute tw-inset-0 tw-w-full tw-h-full tw-transform tw--rotate-90" viewBox="0 0 64 64">
                  <!-- Background circle -->
                  <circle cx="32" cy="32" r="28" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="3"/>
                  <!-- Progress circle -->
                  <circle 
                    cx="32" 
                    cy="32" 
                    r="28" 
                    fill="none" 
                    stroke="#D4AF37" 
                    stroke-width="3" 
                    stroke-linecap="round"
                    stroke-dasharray="175.929"
                    stroke-dashoffset="35"
                    class="tw-transition-all tw-duration-1000"
                  />
                </svg>
                
                <!-- Gummy Image -->
                {% if section.settings.gummy_image != blank %}
                  <div class="tw-absolute tw-inset-2 tw-rounded-full tw-overflow-hidden">
                    {{ section.settings.gummy_image | image_url: width: 200 | image_tag: 
                       class: 'tw-w-full tw-h-full tw-object-cover', 
                       loading: 'lazy',
                       alt: 'Gummy' }}
                  </div>
                {% else %}
                  <!-- Placeholder for gummy -->
                  <div class="tw-absolute tw-inset-2 tw-bg-red-500 tw-rounded-full tw-flex tw-items-center tw-justify-center">
                    <span class="color-contrast-higher tw-text-xs">üç¨</span>
                  </div>
                {% endif %}
                
              </div>
              
              <!-- Text Content -->
              <div class="color-contrast-higher">
                <p class="tw-text-sm tw-opacity-80 tw-mb-1">
                  {{ section.settings.timeline_label | default: 'Starts working in' }}
                </p>
                <h4 class="tw-text-lg md:tw-text-xl tw-font-bold">
                  {{ section.settings.timeline_duration | default: '1-2 days' }}
                </h4>
              </div>
              
            </div>
          </div>
        </div>
      {% endif %}

    </div>
  {% else %}
    <!-- Placeholder when no image is selected -->
    <div class="tw-relative tw-w-full tw-h-[400px] md:tw-h-[580px] tw-bg-gray-200 tw-flex tw-items-center tw-justify-center">
      <p class="tw-text-gray-500 tw-text-center">
        <svg class="tw-w-16 tw-h-16 tw-mx-auto tw-mb-4" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
        </svg>
        Select an image in the theme customizer
      </p>
    </div>
  {% endif %}

</div>

{% schema %}
{
  "name": "Full Width Feature",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Clinically backed. Expert formulated."
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Each Munchie Killer gummy contains a precise 500 mg dose of berberine ‚Äî the most studied natural compound for blood sugar regulation. When paired with chromium and apple cider vinegar, it supports healthy glucose metabolism and helps your body stay in fat-burning mode longer."
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background Image"
    },
    {
      "type": "header",
      "content": "Timeline Overlay"
    },
    {
      "type": "checkbox",
      "id": "show_timeline",
      "label": "Show Timeline Overlay",
      "default": true
    },
    {
      "type": "text",
      "id": "timeline_label",
      "label": "Timeline Label",
      "default": "Starts working in"
    },
    {
      "type": "text",
      "id": "timeline_duration",
      "label": "Timeline Duration",
      "default": "1-2 days"
    },
    {
      "type": "image_picker",
      "id": "gummy_image",
      "label": "Gummy Image (PNG)"
    }
  ],
  "blocks": [
    {
      "type": "pill",
      "name": "Ingredient Pill",
      "settings": [
        {
          "type": "text",
          "id": "pill_text",
          "label": "Pill Text",
          "default": "Ingredient ‚Äî Amount"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Full Width Feature",
      "blocks": [
        {
          "type": "pill",
          "settings": {
            "pill_text": "Berberine HCI ‚Äî 500 mg"
          }
        },
        {
          "type": "pill",
          "settings": {
            "pill_text": "Chromium (as Picolinate) ‚Äî 100 mcg"
          }
        },
        {
          "type": "pill",
          "settings": {
            "pill_text": "Apple Cider Vinegar Powder ‚Äî 100 mg"
          }
        }
      ]
    }
  ]
}
{% endschema %}
